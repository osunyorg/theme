.block-testimonials
    &--grid,
    &--list
        .testimonial
            .avatar
                width: space(10)

    &:where(:not(.block-testimonials--carousel))
        .testimonial
            figcaption
                align-items: flex-start
                display: flex
                gap: $spacing-2
                > p
                    flex: 1
                span
                    display: block
                    + span
                        margin-top: space()
                
                @include media-breakpoint-down(desktop)
                    margin-top: space(5)

    &--grid
        .testimonials
            @include layout-grid

        .testimonial
            @include media-breakpoint-up(desktop)
                figcaption
                    gap: calc(#{columns(1)} - #{space(10)})
                    margin-top: $spacing-3
        
    &--list
        .testimonials
            @include layout-list

        .testimonial
            @include media-breakpoint-up(desktop)
                align-items: baseline
                display: flex
                gap: var(--grid-gutter)
                figcaption
                    flex: 1

            @include in-page-without-sidebar
                blockquote
                    width: columns(8)
                figcaption
                    gap: calc(#{columns(1)} - #{space(10)})

            @include in-page-with-sidebar
                blockquote
                    width: columns(5)
                figcaption
                    flex-direction: column
                    gap: space()
                    .avatar + p
                        margin-top: space()
    
    &--large
        .testimonials
            @include layout-large
                
        .testimonial
            figcaption
                span
                    display: block
                    + span
                        margin-top: space()
                
            @include media-breakpoint-up(desktop)
                .avatar
                    width: calc(#{columns(1)} + var(--grid-gutter))
                figcaption
                    align-items: center
                    gap: calc(#{columns(1)} / 2)
                    margin-top: $spacing-3
            
            @include media-breakpoint-down(desktop)
                .avatar
                    width: space(10)

    &--carousel,
    &:has(.testimonials--carousel) // Todo : remove after data has been migrate
        .container
            overflow: hidden
        blockquote
            @include blockquote
            p
                font-family: $block-testimonials-font-family
                font-size: $block-testimonials-font-size
                line-height: $block-testimonials-line-height
                font-style: $block-testimonials-style
                color: $block-testimonials-color
                @include media-breakpoint-up(desktop)
                    font-size: pxToRem(30) // TODO : on peut peut-Ãªtre la sortir avec du RFS ?
                @include media-breakpoint-up(xl)
                    font-size: $block-testimonials-xl-font-size
                    line-height: $block-testimonials-xl-line-height
            &.is-long
                p
                    @include media-breakpoint-up(xl)
                        font-size: $block-testimonials-xl-font-size-long-text
                        line-height: $block-testimonials-xl-line-height-long-text
        figure
            margin-bottom: 0
            width: columns(12)
        figcaption
            align-items: center
            display: flex
            margin-top: $spacing-3
            span
                display: block
        .avatar
            flex-shrink: 0
            margin-bottom: 0
            margin-right: $spacing-2
            min-width: pxToRem(80)
            width: columns(1)

        @include in-page-with-sidebar
            figure 
                width: columns(8)
        
        @include in-page-without-sidebar
            .testimonials
                width: columns(12)
            figure
                min-height: columns(2)
                width: columns(8)
                padding-left: offset(4)
                width: columns(12)
                &.with-picture
                    position: relative
                    figcaption
                        margin-top: $spacing-2
                        .avatar
                            left: columns(2)
                            margin-left: var(--grid-gutter)
                            position: absolute
                            top: 0
                            width: columns(2)
        .slider
            display: flex
            flex-direction: column
            &-slide
                &.is-next
                    opacity: 0
            &-controls
                order: -1
                margin-bottom: $spacing-3
            &-pagination
                li
                    &::before
                        background-color: $block-testimonials-pagination-background
                    &::after
                        background-color: $block-testimonials-pagination-progress-background
                
            @include in-page-without-sidebar
                &-controls
                    margin-left: offset(4)
