.post
    @include article
    .post-title
        @include h3
        a
            @include stretched-link
            display: block
            text-decoration: none
    .post-subtitle
        @include h3
        color: var(--color-text-alt)
    .federated
        order: -1
    .post-meta,
    .post-reading-time
        @include meta
        color: var(--color-text-alt)
    .post-meta
        *
            display: inline
        * + *
            &::before
                content: ' • '
                display: inline-block
                vertical-align: middle
                padding-left: space()
                padding-right: space()
    .post-content
        > * + * 
            margin-top: $spacing-2
    &.is-federated
        .post-content
            display: flex
            flex-direction: column
        .post-federation
            order: -1
            margin-top: 0

.posts
    @include list-reset

    &--alternate
        @include alternate("> li")
        @include media-breakpoint-up(desktop)
            &.without-images
                .post
                    margin-top: 0 !important
        @include media-breakpoint-down(desktop)
            >li + li
                margin-top: $spacing-5
            .post
                .post-meta
                    margin-top: $spacing-1

    &--carousel
        @include layout-carousel
        
        @include in-page-with-sidebar
            .post
                .post-title,
                .post-subtitle
                    @include h4
            .slider
                .slider-arrows
                    justify-content: space-between
                    width: columns(4)
                @include media-breakpoint-down(xxxl)
                    .slider-slide
                        width: columns(4)
                    .slider-arrows
                        width: columns(5)
    
    &--grid
        @include media-breakpoint-down(desktop)
            > li + li
                margin-top: $spacing-5
        @include in-page-without-sidebar
            @include grid($block-posts-grid-columns)
            .media picture img
                width: 100%
        @include in-page-with-sidebar
            @include grid(2)

    &--large
        > li + li
                margin-top: $spacing-4
        .post
            @include small-arrow-right-hover('.more')
            .media
                &, img
                    aspect-ratio: auto
        @include media-breakpoint-down(desktop)
            .post
                [itemprop="abstract"]
                    margin-top: 0
                .post-author 
                    margin-right: 0
                    + time
                        display: inline
                        &::before
                            content: ' • '
                .post-categories
                    li
                        margin-right: space(2)
        @include media-breakpoint-up(desktop)
            .post
                flex-direction: row
                gap: var(--grid-gutter)
                .post-title,
                .post-subtitle
                    @include h2
                [itemprop="abstract"]
                    margin-top: $spacing-3

        @include in-page-with-sidebar
            .post
                @include media-breakpoint-down(xl)
                    flex-direction: column
                    gap: unset
                    [itemprop="abstract"]
                        margin-top: $spacing-2
                @include media-breakpoint-up(xl)
                    .media,
                    .post-content
                        width: columns(4)
            @include media-breakpoint-up(xl)
                &.without-images
                    .post
                        .post-content
                            width: columns(8)
        @include in-page-without-sidebar
            .post
                gap: var(--grid-gutter)
                .media
                    width: columns(6)
                .post-content
                    width: columns(5)
                .post-title,
                .post-subtitle
                    @include lead
            &.without-images
                .post
                    @include media-breakpoint-up(xl)
                        margin-left: offset(4)
                        .post-content
                            width: columns(6)
                    @include media-breakpoint-down(xl)
                        .post-content
                            width: columns(8)

    &--list
        > li:where(:not(:last-child))
            border-bottom: var(--border-width) solid var(--color-border)
        article
            .media
                background: none
                margin: 0
                &, img
                    aspect-ratio: auto

        @include media-breakpoint-down(desktop)
            > li
                position: relative
                padding-bottom: $spacing-3
                + li
                    margin-top: $spacing-3
            article
                .post-content
                    display: flex
                    flex-direction: column
                    padding-top: $spacing-2
                    .post-title
                        margin-bottom: 0
                    .post-categories
                        margin-bottom: 0
                    [itemprop="abstract"]
                        margin-top: $spacing-1
                .media
                    order: -1
                    max-width: 33%

        @include media-breakpoint-up(desktop)
            article
                display: flex
                flex-direction: row

        @include in-page-with-sidebar
            > li
                padding-bottom: $spacing-3
                + li
                    margin-top: $spacing-3
            article
                gap: var(--grid-gutter)
                .media
                    width: columns(2)
                .post-content
                    width: columns(6)

        @include in-page-without-sidebar
            > li
                padding-bottom: $spacing-5
                + li
                    margin-top: $spacing-5
            article
                gap: var(--grid-gutter)
                position: relative
                .media
                    width: columns(3)
                .post-content
                    display: flex
                    flex-direction: column
                    width: columns(7)
                .post-meta
                    margin-top: auto
                    &:where(:has(*:not(time)))
                        padding-top: $spacing-3
                    time
                        margin-top: space()
                        position: absolute
                        right: 0
                        top: 0
                        + *::before
                            content: none
                            padding: 0

.posts__page
    .lead
        @include h3
        // Safe spacing if post is empty
    .document-content
        @include document-min-height(600px)
    &:not(.full-width)
        .post-sidebar
            @include sidebar
    .block-signatures
        .signatures
            @include list-reset
            border-top: var(--border-width) solid var(--color-border)
            padding-top: var(--grid-gutter)
            li
                align-items: flex-start
                display: flex
                flex-direction: row-reverse
                gap: var(--grid-gutter)
                position: relative
                .avatar
                    min-width: pxToRem(80)
                    width: columns(1)
                    @include media-breakpoint-up(desktop)
                        width: columns(2)
                .author-content
                    flex: 1
                    a
                        @include stretched-link
                        @include h4
                        text-decoration: none
                    .more
                        @include link(var(--color-accent))
                    p
                        @include meta
                &:hover
                    .more
                        text-decoration-color: var(--color-accent)
                + li
                    margin-top: $spacing-3

    &.full-width
        @include media-breakpoint-up(desktop)
            .post-sidebar
                @include container
                > div
                    display: flex
                    align-items: start
                    margin-bottom: $spacing-5
                .toc-cta
                    padding-right: 0
                aside
                    width: columns(5)
                    flex-shrink: 0
            @include media-breakpoint-down(desktop)
                margin-bottom: $spacing-5

.post-infos
    @include sidebar-infos

.related
    margin-top: $spacing-3
    .posts
        @include grid(2, desktop)
        margin-bottom: 0
    .link
        @extend .link-more

.authors__term
    .blocks + .container
        margin-top: $spacing-5
