{{ $options := site.Params.categories.index.options }}
{{ $layout := site.Params.categories.index.layout }}
{{ $layout_partial := printf "categories/partials/layouts/%s/%s.html" $layout $layout }}
{{ $categories := partial "GetPathSliceFromObjects" .Pages }}

{{ if eq .Kind "term" }}
  {{ $categories = .Params.children }}
{{ end }}

{{ partial $layout_partial (dict
    "categories" $categories
    "heading_level" 2
    "options" $options
  ) }}
