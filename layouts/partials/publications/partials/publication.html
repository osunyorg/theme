{{ $publication := .publication }}
{{ $researcher := .researcher }}
{{ $heading_tag := partial "GetHeadingTag" (dict 
  "level" .heading_level 
  "attributes" "class='publication-title' itemprop='headline'"
)}}

{{ with $publication }}
  <li class="publication" itemscope itemtype="http://schema.org/ScholarlyArticle">
    <div class="publication-content">
      {{- $title := partial "PrepareHTML" .Title -}}

      {{ $heading_tag.open }}
        <a href="{{ .Permalink }}" title="{{ safeHTML (i18n "commons.more_aria" (dict "Title" $title)) }}">{{ $title }}</a>
      {{ $heading_tag.close }}

      {{ if or .Params.journal_title .Params.date .Params.authors_list }}
        <div class="publication-meta">
          {{- with .Params.date -}}
            <span>{{- .Format "2006" -}}</span>
          {{- end -}}

          {{- with .Params.journal_title -}}
            <span>{{- partial "PrepareHTML" . -}}</span>
          {{- end -}}

          {{- with .Params.ref -}}
            <div class="publication-ref" itemprop="isPartOf" itemscope itemtype="http://schema.org/PublicationIssue">
              <span itemprop="name">{{- partial "PrepareHTML" . -}}</span>
            </div>
          {{- end -}}
        </div>
      {{ end }}
    </div>
    {{ with .Params.authors_list }}
      <div class="publication-authors">
        <span itemprop="author">{{ partial "PrepareHTML" . }}</span>
      </div>
    {{ end }}
  </li>
{{ end }}